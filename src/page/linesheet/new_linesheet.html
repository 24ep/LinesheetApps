
<style>

    .dropdown_rc {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 120px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      padding: 12px 16px;
      z-index: 1;
    }

    .element.w-100.p-3:hover {
    background: #ececec;

    }


    .ss-main .ss-values .ss-value {
        display: flex;
        user-select: none;
        align-items: center;
        width: fit-content;
        background-color: #dfdfdf;
        border-radius: var(--ss-border-radius);
        animation-name: ss-valueIn;
        animation-duration: var(--ss-animation-timing);
        animation-timing-function: ease-out;
        animation-fill-mode: both;
        margin: 3px;
        padding:3px;
    }
    .ss-main .ss-values .ss-max {
        display: flex;
        user-select: none;
        align-items: center;
        width: fit-content;
        font-size: 12px;
        color: var(--ss-bg-color);
        line-height: 1;
        padding: var(--ss-spacing-s) var(--ss-spacing-m);
        background-color: #dfdfdf;
        border-radius: var(--ss-border-radius);
    }
    .ss-main .ss-values .ss-value .ss-value-text {
        font-size: 12px;
        color: #495057;
        line-height: 1;
        padding: var(--ss-spacing-s) var(--ss-spacing-m);
        font-weight: 500;
    }
    .ss-main .ss-values .ss-value .ss-value-delete {
        display: table;
    }
</style>
<div class="border-bottom pb-2 pt-4 shadow-sm text-white bg-dark">
    <div class="d-flex">
        <div class="p-2 flex-grow-1">
            <div class="container ">
                <div class="row">
                    <div class="col-sm-3" style="inline-size: fit-content;font-size: 40px;">
                    </div>
                    <div class="col-sm-9 p-0">
                        <h6 class=" ps-3">
                            <strong>Create new central linesheet</strong>
                        </h6>
                        <small class=" ps-3">Please fill product information a bit to generate a linesheet break by categories of product</small></div>
                    </div>
                </div>
            </div>
            <!-- <div class="p-2">Search</div> -->
            <div class="p-2 me-3">
                <button type="button" class="btn btn-danger shadow-sm bg-gradient" data-bs-toggle="modal" data-bs-target="#create_new_model">
                    <ion-icon name="bag-add-outline"></ion-icon> Create new linesheet
                </button>
            </div>
        </div>
        <!-- Button trigger modal -->
        <!-- Modal -->
        <div class="modal fade" id="create_new_model" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-black" id="staticBackdropLabel" >Create new linesheet</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body ps-5 pe-5">
                        <span class="fw-bold text-black mt-2 mb-2">
                            <ion-icon name="cube-outline"></ion-icon>
                            Product information</span><br>
                            <!-- brand name -->
                            <label class="text-black mb-2 mt-2" for="brand">Brand</label>
                            <input class="form-control form-control-sm" list="brand_list" id="brand" placeholder="Type to search...">
                            <datalist id="brand_list">
                            </datalist>
                            <!-- number of sku -->
                            <label class="text-black mb-2 mt-2" for="brand">Total SKUs</label>
                            <input type="number" min="1" max="5000" class="form-control form-control-sm" id="sku" placeholder="">
                            <!-- store stock -->
                            <div id='stock_source_options'>
                                <p class="placeholder-glow">
                                    <span class="placeholder w-25 opacity-25 bg-secondary"></span>
                                    <span class="placeholder w-75 opacity-25 bg-secondary"></span>
                                </p>
                            </div>
                            <!-- template -->
                            <div id='template_options'>
                                <p class="placeholder-glow">
                                    <span class="placeholder w-25 opacity-25 bg-secondary"></span>
                                    <span class="placeholder w-75 opacity-25 bg-secondary"></span>
                                </p>
                            </div>
                            <hr class="text-secondary">
                            <span class="fw-bold text-black mt-2 mb-2" class="text-black">
                                <ion-icon name="ticket-outline"></ion-icon>
                                Job information</span><br>
                                <!-- launch date -->
                                <label for="launch_date" class="text-black mt-2 mb-2">launch date</label>
                                <input type="date" class="form-control from-control-sm" id="launch_date" placeholder="">
                                <!-- production tpe -->
                                <div id='production_type_options'>
                                    <p class="placeholder-glow">
                                        <span class="placeholder w-25 opacity-25 bg-secondary"></span>
                                        <span class="placeholder w-75 opacity-25 bg-secondary"></span>
                                    </p>
                                </div>
                                <!-- chanel -->
                                <div id='sale_channel_options'>
                                    <p class="placeholder-glow">
                                        <span class="placeholder w-25 opacity-25 bg-secondary"></span>
                                        <span class="placeholder w-75 opacity-25 bg-secondary"></span>
                                    </p>
                                </div>
                                <!-- contact person -->

                                    <label for="contact_person" class="text-black mt-2 mb-2" >Contact Person</label>
                                    <textarea class="form-control" placeholder="Name , Email , Phone" id="contact_person" style="height: 100px"></textarea>

                                <div class="mt-3 mb-3">
                                    <button type="button" onclick="generate_linesheet()" id="generate_linesheet" class="btn btn-dark btn-sm" style="width: 100%;">Generate linesheet</button>
                                    <div id='generate_status'>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ms-3 me-3" style="height: -webkit-fill-available;">

                <div class="row h-100" >

                    <div class="col-2 pt-4 border-end p-0">

                        <!-- <div id="dropdown1" class="dropdown dropdown-menu p-0 border-0">
                                <li><a class="dropdown-item" href="#"><ion-icon name="add-outline"></ion-icon> New folder</a></li>
                          </div> -->

                        <div id="folder_list">
                            <!-- Linesheet -->
                        </div>
                    </div>
                    <div class="col-10 ps-0 pe-0">
                        <div id="linesheet_folder">
                        </div>
                    </div>
                </div>
            </div>
            <script>
            const { pythonShell } = require('/src/index');
            const  path = require('/src/path');
            
            var configOptions = [
    { id: 'template_options', args: ['get_family'], variableName: 'familyList' , slim_id:'#template' },
    { id: 'sale_channel_options', args: ['get_input', 'sale_channel', 'multiple'], variableName: 'saleChannelList'  , slim_id:'#sale_channel' },
    { id: 'production_type_options', args: ['get_input', 'production_type', 'single'], variableName: 'productionTypeList' , slim_id:'#production_type'  },
    { id: 'stock_source_options', args: ['get_input', 'stock_source', 'multiple'], variableName: 'stockSourceList' , slim_id:'#stock_source'  }
];

// var tail = require('tail.select.js');

configOptions.forEach(option => {
    let optionList = '';

    new PythonShell(path.join(__dirname, '/src/page/linesheet/config/new_linesheet_config.py'), { args: option.args })
    // new PythonShell(`src//src/page/linesheet/config/new_linesheet_config.py`, { args: option.args })
    .on('error', err => {
        console.error('An error occurred while running the Python script:', err);
        // handle the error here
    })
    .on('stderr', message => {
        console.error('Received error message:', message);
        // Notiflix.Loading.remove();
    })
    .on('message', message => {
        optionList += message;
        if (optionList) {
            document.getElementById(option.id).innerHTML = optionList;
            // runSlimSelect(option.slim_id);
            // runTomselect(option.slim_id);
            // new TomSelect(option.slim_id,{});
            setTimeout(() => {
                new TomSelect(option.slim_id,{});
            }, 2000);
        }

    });

});
            </script>
            <!-- <script type="text/javascript" src="https://pyodide-cdn2.iodide.io/v0.18.0/full/pyodide.js"></script> -->
            <script src="/page/linesheet/js/new_linesheet.bundle.js"></script>


</body>
</html>
